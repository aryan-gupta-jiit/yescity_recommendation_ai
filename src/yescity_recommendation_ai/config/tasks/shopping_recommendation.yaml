description: |
  TASK: Find shopping places in {cityName} that match the user's request: {user_query_details}

  === CRITICAL INSTRUCTIONS - READ CAREFULLY ===
  
  STEP 1: Use the search_shopping_places tool with ONLY cityName="{cityName}"
  
  STEP 2: You will receive a list of ALL shops in {cityName}. For example:
  [
    {
      "_id": "68c7f27e20f4dc4834768b6d",
      "shops": "JDS Banaras",
      "famousFor": "Sarees",
      "priceRange": "₹10,000–₹3,65,000+",
      "flagship": true,
      "premium": "A",
      ... (other fields)
    },
    ... more shops
  ]
  
  STEP 3: Analyze each shop's data to find matches for what the user wants:
  - Look at the "shops" field (shop name)
  - Look at the "famousFor" field (what they sell)
  - Consider "flagship" (true = premium establishment)
  - Consider "premium" ("A" = top quality)
  
  STEP 4: Select the TOP 1-3 most relevant shops that match the user's request
  
  STEP 5: Return ONLY the JSON with their _id and shops names - NOTHING ELSE
  
  === YOUR OUTPUT MUST BE EXACTLY THIS FORMAT ===
  {
    "recommendations": [
      {"_id": "68c7f27e20f4dc4834768b6d", "shops": "JDS Banaras"},
      {"_id": "another_id_here", "shops": "Another Shop Name"}
    ]
  }
  
  === RULES ===
  - DO NOT include any explanations, comments, or code
  - DO NOT write tutorials or examples
  - DO NOT describe what you're doing
  - JUST return the JSON object above
  - If no shops match, return: {"recommendations": []}

expected_output: |
  A JSON object with the exact structure:
  {
    "recommendations": [
      {"_id": "68c7f27e20f4dc4834768b6d", "shops": "JDS Banaras"},
      {"_id": "68c7f27e20f4dc4834768b6e", "shops": "ALBELI"}
    ]
  }

  Rules:
  1. Each recommendation must have _id (as string) and shops
  2. Maximum 3 recommendations, minimum 1 if matches found
  3. If no matches found, return empty array: {"recommendations": []}
  4. Do not include any other text or explanation - JUST THE JSON

agent: shopping_guide
async_execution: false